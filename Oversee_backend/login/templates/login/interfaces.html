{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Interfaces</title>
    <link rel="stylesheet" href="{% static 'login/css/dashboard.css' %}" />
    <link rel="stylesheet" href="{% static 'login/css/interfaces.css' %}">
</head>



<body
<div class="layout-container">
    {% include 'login/partials/sidebar.html' %}
    <div class="table-container">
        <h2>Interfaces Detailed</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Status</th>
                    <th>MAC</th>
                    <th>Last Change</th>
                </tr>
            </thead>
            <tbody id="interfaces-table-body">
                <!-- Will be filled by JS -->
            </tbody>
        </table>
    </div>
</div>
</body>

<script>
document.addEventListener("DOMContentLoaded", function() {
    fetch('/interface-api/')
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success' && Array.isArray(data.interfaces)) {
                const tbody = document.getElementById('interfaces-table-body');
                    tbody.innerHTML = data.interfaces.map(intf => `
                        <tr>
                            <td>${intf.name}</td>
                            <td class="status-${intf.status.replace(/_/g, '-').toLowerCase()}">${intf.status}</td>
                            <td>${intf.mac}</td>
                            <td>${intf.last_change}</td>
                        </tr>
                    `).join('');
            } else if (data.status === 'error') {
                document.getElementById('interfaces-table-body').innerHTML = `<tr><td colspan="4">${data.message}</td></tr>`;
            } else {
                document.getElementById('interfaces-table-body').innerHTML = '<tr><td colspan="4">No data available</td></tr>';
            }
        })
        .catch(() => {
            document.getElementById('interfaces-table-body').innerHTML = '<tr><td colspan="4">Error loading data</td></tr>';
        });
});
</script>

</body>
</html>
